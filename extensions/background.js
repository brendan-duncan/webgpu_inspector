(()=>{const e=new Map;chrome.runtime.onConnect.addListener((n=>{n.onMessage.addListener(((n,s)=>{const t=void 0!==n.tabId?n.tabId:s.sender.tab.id;e.has(t)||e.set(t,new Map);const a=e.get(t);a.has(s.name)||a.set(s.name,[]);const p=a.get(s.name);p.includes(s)||(p.push(s),s.onDisconnect.addListener((()=>{p.includes(s)&&p.splice(p.indexOf(s),1),0===p.length&&a.delete(s.name),0===a.size&&e.delete(t)})));const o=(e,n)=>{e.forEach((e=>{e.postMessage(n)}))};'webgpu-inspector-panel'===s.name&&a.has('webgpu-inspector-page')&&o(a.get('webgpu-inspector-page'),n),'webgpu-inspector-page'===s.name&&a.has('webgpu-inspector-panel')&&o(a.get('webgpu-inspector-panel'),n)}))}))})();
//# sourceMappingURL=background.js.map
